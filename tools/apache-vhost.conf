<VirtualHost *:80>
    # Nom de domaine de votre club
    ServerName gestnav.votreclub.fr
    ServerAlias www.gestnav.votreclub.fr
    
    # Chemin vers GESTNAV
    DocumentRoot /var/www/gestnav
    
    <Directory /var/www/gestnav>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Sécurité supplémentaire
        <FilesMatch "\.(php|phtml)$">
            Require all granted
        </FilesMatch>
    </Directory>
    
    # Logs
    ErrorLog ${APACHE_LOG_DIR}/gestnav_error.log
    CustomLog ${APACHE_LOG_DIR}/gestnav_access.log combined
    
    # Sécurité - Cacher les fichiers sensibles
    <FilesMatch "^(config\.php|club_config\.php|\.git|\.env)">
        Require all denied
    </FilesMatch>
    
    # Cache pour les assets statiques
    <IfModule mod_expires.c>
        ExpiresActive On
        ExpiresByType image/jpg "access plus 1 year"
        ExpiresByType image/jpeg "access plus 1 year"
        ExpiresByType image/gif "access plus 1 year"
        ExpiresByType image/png "access plus 1 year"
        ExpiresByType text/css "access plus 1 month"
        ExpiresByType application/javascript "access plus 1 month"
    </IfModule>
</VirtualHost>

# Configuration SSL (après avoir obtenu un certificat Let's Encrypt)
# Décommentez et adaptez après avoir exécuté : sudo certbot --apache -d gestnav.votreclub.fr
#
# <VirtualHost *:443>
#     ServerName gestnav.votreclub.fr
#     DocumentRoot /var/www/gestnav
#     
#     <Directory /var/www/gestnav>
#         Options -Indexes +FollowSymLinks
#         AllowOverride All
#         Require all granted
#     </Directory>
#     
#     SSLEngine on
#     SSLCertificateFile /etc/letsencrypt/live/gestnav.votreclub.fr/fullchain.pem
#     SSLCertificateKeyFile /etc/letsencrypt/live/gestnav.votreclub.fr/privkey.pem
#     Include /etc/letsencrypt/options-ssl-apache.conf
#     
#     ErrorLog ${APACHE_LOG_DIR}/gestnav_ssl_error.log
#     CustomLog ${APACHE_LOG_DIR}/gestnav_ssl_access.log combined
# </VirtualHost>
